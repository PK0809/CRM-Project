{% load static %}
<!DOCTYPE html>
<html lang="en">
<style>
    .hidden {
        display: none;
    }
</style>
<head>
    <meta charset="UTF-8">
    <title>CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-10">
    <!-- Header -->
    <header class="flex items-center justify-between bg-white shadow p-4 h-[100px]">
        <div class="flex items-center space-x-4 w-[500px]">
            <button onclick="toggleSidebar()" class="text-gray-500 hover:text-black focus:outline-none text-xl">☰</button>
            <a href="{% url 'dashboard' %}">
                <img src="{% static 'images/logo.png' %}" alt="Logo" class="w-[200px] h-auto ml-[-12px]">
            </a>
        </div>
        <div class="flex items-center space-x-2">
            <span class="text-gray-700 font-semibold">Welcome, User</span>
            <a href="{% url 'profile' %}" class="text-blue-600 hover:underline">Profile</a>
            <a href="{% url 'logout' %}" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Logout</a>
        </div>
    </header>


    <div class="flex">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-[250px] bg-white border-r border-gray-200 p-4">
            <h2 class="text-2xl font-bold mb-4 text-gray-800">Main Menu</h2>

            <!-- Admin Section -->
            {% if request.user.is_superuser %}
            <div class="mb-4">
                <button onclick="toggleMenu('adminMenu')" class="w-full text-left py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded font-bold">
                    Admin
                </button>
                <div id="adminMenu" class="ml-4 mt-2 hidden">
                    <li><a href="{% url 'user_list' %}">👤 Users</a></li>
                </div>
            </div>
            {% endif %}

            <div class="mt-4">
                <button onclick="toggleMenu('salesMenu')" class="w-full text-left py-2 px-4 bg-blue-100 hover:bg-blue-200 rounded font-bold">Sales</button>
                <div id="salesMenu" class="ml-4 mt-2 hidden">
                    {% if perms.crm.view_client %}
                    <a href="/client/" class="block py-1 text-blue-600 hover:underline font-semibold">🧾 Client</a>
                    {% endif %}

                    {% if perms.crm.view_lead %}
                    <a href="/lead/" class="block py-1 text-blue-600 hover:underline font-semibold">📋 Lead</a>
                    {% endif %}

                    {% if perms.crm.view_estimation %}
                    <a href="/estimation/" class="block py-1 text-blue-600 hover:underline font-semibold">📐 Estimation</a>
                    {% endif %}

                    {% if perms.crm.view_invoice %}
                    <a href="/invoices/" class="block py-1 text-blue-600 hover:underline font-semibold">🧾 Invoice</a>
                    {% endif %}

                    {% if perms.crm.view_report %}
                    <a href="{% url 'report_list' %}" class="block py-1 text-blue-600 hover:underline font-semibold">📊 Reports</a>
                    {% endif %}
                </div>
            </div>

            <!-- Purchase Section -->
            {% if request.user.is_superuser %}
            <div class="mt-4">
                <button onclick="toggleMenu('purchaseMenu')" class="w-full text-left py-2 px-4 bg-green-100 hover:bg-green-200 rounded font-bold">Purchase</button>
                <div id="purchaseMenu" class="ml-4 mt-2 hidden">
                    <a href="{% url 'vendor' %}" class="block py-1 text-green-600 hover:underline font-bold">Vendor</a>
                    <a href="#" class="block py-1 text-green-600 hover:underline font-bold">PO</a>
                    <a href="#" class="block py-1 text-green-600 hover:underline font-bold">Bill</a>
                </div>
            </div>
            {% endif %}
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-6">
            {% block content %}
            {% endblock %}
        </main>
    </div>

    <script>
        function toggleMenu(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('hidden');
        }
    </script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }
    </style>
    <style>
        .sidebar {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 14px;
            width: 200px;
            padding: 10px;
            background-color: #f8f9fa;
            border-right: 1px solid #ddd;
            height: 100vh;
        }

            .sidebar h3 {
                font-weight: bold;
                margin-bottom: 10px;
                color: #333;
            }

            .sidebar a {
                display: block;
                color: #007bff;
                padding: 6px 10px;
                text-decoration: none;
                border-radius: 4px;
                font-weight: 500;
                margin-bottom: 5px;
            }

                .sidebar a:hover {
                    background-color: #e6f0ff;
                    color: #004080;
                }

            .sidebar .active {
                background-color: #dbeafe;
                font-weight: bold;
            }

            .sidebar .section-heading {
                background-color: #d1fae5;
                font-weight: bold;
                padding: 6px 10px;
                border-radius: 4px;
                margin-top: 10px;
                color: #000;
            }
    </style>
    <script>
        function toggleMenu(id) {
            const menu = document.getElementById(id);
            menu.classList.toggle('hidden');
        }
    </script>


</body>
</html>
<!-- Footer -->
<footer class="bg-white text-right text-gray-600 p-4 shadow">
    Designed & Developed By Nagaraj Nada
</footer>