{% extends 'base.html' %}
{% block content %}
<div class="max-w-3xl mx-auto bg-white p-6 rounded shadow mt-6">
    <h2 class="text-xl font-bold mb-4 text-center">Quotation Details</h2>

    <div class="mb-4">
        <p><strong>Quote No:</strong> {{ estimation.quote_no }}</p>
        <p><strong>Quote Date:</strong> {{ estimation.quote_date }}</p>
        <p><strong>Client:</strong> {{ estimation.company_name }}</p>
        <p><strong>Total:</strong> ₹{{ estimation.total }}</p>
    </div>

    <div class="mb-4">
        <p><strong>Credit Days:</strong> {{ estimation.credit_days }}</p>
        <p><strong>Remarks:</strong> {{ estimation.remarks }}</p>
    </div>

    <!-- ✅ Unified Form for Approve/Reject -->
    <form method="post" action="{% url 'approve_invoice' estimation.id %}">
        {% csrf_token %}
        <div class="flex justify-between items-center gap-4">
            <button type="submit" name="action" value="approve"
                    class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 shadow">
                ✅ Approve Invoice
            </button>

            <input type="text" name="reason" placeholder="Rejection reason..."
                   class="flex-grow border rounded px-2 py-1" />

            <button type="submit" name="action" value="reject"
                    class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                ❌ Reject
            </button>
        </div>
    </form>
</div>
{% endblock %}
